var Z=Object.defineProperty;var J=(b,t,e)=>t in b?Z(b,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):b[t]=e;var u=(b,t,e)=>J(b,typeof t!="symbol"?t+"":t,e);var S=class{constructor(t){u(this,"moduleBase");this.moduleBase={name:t||"No module base name."}}systemError(t,e,r="no_message"){throw r!=="no_message"&&(console.log("%c error object is : ","color:#FFF; background:red"),console.log(r)),new Error(`(\u2609\u0434\u2299)!! ${this.moduleBase.name} => ${t} -> ${e}`)}},X=S;var $=class extends X{constructor(e,r){super("Path");u(this,"points");u(this,"length");u(this,"cacheMode");u(this,"siteCaches");u(this,"lengthCaches");this.points=[],this.length=0,this.cacheMode=!1,this.siteCaches=[],this.lengthCaches=[],e&&typeof e==="string"&&this.compile(e.trim(),r)}compile(e,r="path"){let n={a:"arc",m:"moveTo",l:"lineTo",h:"horizontalLineTo",v:"verticalLineTo",c:"curve",q:"quadraticBezierCurve",s:"smoothCurve",t:"smoothQuadraticBezierCurve",z:"closePath"},i={m:2,l:2,h:1,v:1,c:6,q:4,s:4,t:2,a:7,z:0},o=(s,a)=>{let m=[];for(let l=0;l<s.length;l+=a)m.push(s.slice(l,l+a));return m};if(r==="path"){let s=Object.keys(n),a=-1,m=[""];for(let l=0;l<e.length;l++)/[a-zA-z]/.test(e[l])&&(a+=1,m[a]=""),e[l]==="-"&&(m[a]+=" "),m[a]+=e[l];for(let l of m){let p=l.trim(),g=p.slice(0,1),P=p.slice(1).split(/,|\s/).filter(x=>x!=="").map(x=>Number(x)),C=i[g.toLowerCase()],L=o(P,C);if(s.indexOf(g.toLowerCase())!==-1){let x=/[A-Z]/.test(g);for(let w of L)this[n[g.toLowerCase()]](...w,x)}else this.systemError("compile","Key name not found",g)}}else r==="polygon"?(this.readPolyline(e),this.closePath()):r==="polyline"&&this.readPolyline(e)}readPolyline(e){let r="";for(let i=0;i<e.length;i++)e[i]==="-"&&(r+=" "),r+=e[i];let n=r.split(/,|\s/).filter(i=>i!=="").map(i=>Number(i));this.moveTo(n[0],n[1],!0);for(let i=2;i<e.length;i+=2)this.lineTo(n[i],n[i+1],!0)}eachPoint(e){let r=this.points.length;for(let n=0;n<r;n++)e(this.points[n])}addPoint(e){e.error&&this.systemError("addPoint",e.error,e),this.lengthCaches.push(this.length),this.points.push(e),this.length+=e.length}setCache(e){this.cacheMode=!!e,this.siteCaches=[]}addPath(e){this.compile(e.toPathString())}render(e){e.beginPath(),this.eachPoint(r=>{r.render(e)})}toPathString(){let e="";return this.eachPoint(r=>{e+=r.toPathString()}),e}getLastPoint(){return this.points.length===0?{ex:0,ey:0}:this.points.slice(-1)[0]}getLastPosition(){let e=this.points[this.points.length-1];return e?e.getLastPosition():{x:0,y:0}}getLinePosition(e){if(this.cacheMode&&this.siteCaches[e])return this.siteCaches[e];let r=null,n=null,i=this.length*e,o=this.points.length,s=0;if(this.lengthCaches.length>10){let a=10,m=Math.floor(this.lengthCaches.length*(1/a));for(let l=1;l<a&&!(i<=this.lengthCaches[l*m]);l++)s=(l-1)*m;i-=this.lengthCaches[s]}for(let a=s;a<o;a++)if(i<=this.points[a].length){if(this.points[a]){r=this.points[a];break}}else i-=this.points[a].length;return r?n=r.getLinePosition(i/r.length):n=this.getLastPosition(),this.cacheMode&&this.siteCaches.length<=2e3&&(this.siteCaches[e]=n),n}getRect(){if(this.points.length===0)return{x:0,y:0,width:0,height:0};let e=1/0,r=1/0,n=-1/0,i=-1/0,o=(s,a)=>{e=Math.min(e,s),r=Math.min(r,a),n=Math.max(n,s),i=Math.max(i,a)};return this.eachPoint(s=>{if(o(s.sx,s.sy),o(s.ex,s.ey),(s instanceof h.Curve||s instanceof h.QuadraticBezierCurve||s instanceof h.SmoothCurve)&&(o(s.p1x,s.p1y),o(s.p2x,s.p2y)),s instanceof h.Arc)for(let a=0;a<=100;a++){let m=s.getLinePosition(a/100);o(m.x,m.y)}}),{x:e,y:r,width:n-e,height:i-r}}getDirection(e){let r=e+.01,n=this.getLinePosition(e),i=this.getLinePosition(r);return y.getAngle(n.x,n.y,i.x,i.y)-270}moveTo(e,r,n=!1){return this.addPoint(new h.MoveTo(this,this.getLastPoint(),e,r,n)),this}lineTo(e,r,n=!1){return this.addPoint(new h.LineTo(this,this.getLastPoint(),e,r,n)),this}curve(e,r,n,i,o,s,a=!1){return this.addPoint(new h.Curve(this,this.getLastPoint(),e,r,n,i,o,s,a)),this}quadraticBezierCurve(e,r,n,i,o=!1){return this.addPoint(new h.QuadraticBezierCurve(this,this.getLastPoint(),e,r,n,i,o)),this}smoothCurve(e,r,n,i,o=!1){return this.addPoint(new h.SmoothCurve(this,this.getLastPoint(),e,r,n,i,o)),this}smoothQuadraticBezierCurve(e,r,n=!1){return this.addPoint(new h.SmoothQuadraticBezierCurve(this,this.getLastPoint(),e,r,n)),this}horizontalLineTo(e,r=!1){return this.addPoint(new h.HorizontalLineTo(this,this.getLastPoint(),e,r)),this}verticalLineTo(e,r=!1){return this.addPoint(new h.VerticalLineTo(this,this.getLastPoint(),e,r)),this}arc(e,r,n,i,o,s,a,m=!1){return this.addPoint(new h.Arc(this,this.getLastPoint(),e,r,n,i,o,s,a,m)),this}closePath(){let e=this.points.filter(r=>r instanceof h.MoveTo).pop();return this.addPoint(new h.ClosePath(this,this.getLastPoint(),e)),this}},y=class{static getDistance(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}static getAngle(t,e,r,n){if(t===r&&e===n)return 0;var i=Math.atan2(n-e,r-t)*180/Math.PI;return i>0?i:360+i}static getSvgLength(t){let e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e.getTotalLength()}},h=class{constructor(t,e,r=!1){u(this,"error");u(this,"path");u(this,"parent");u(this,"offset");u(this,"_absolute");u(this,"length");u(this,"data");this.error=null,this.length=0,this.data={p1x:0,p1y:0,p2x:0,p2y:0,ex:0,ey:0},this.path=t,this.parent=e,this.offset={x:0,y:0},this.absolute=!!r,this._absolute=!!r}set absolute(t){this._absolute=!!t,this.offset.x=t?0:this.sx,this.offset.y=t?0:this.sy}get absolute(){return this._absolute}get sx(){return this.parent.ex}get sy(){return this.parent.ey}get ex(){return this.data.ex+this.offset.x}set ex(t){this.data.ex=t}get ey(){return this.data.ey+this.offset.y}set ey(t){this.data.ey=t}get p1x(){return this.data.p1x+this.offset.x}set p1x(t){this.data.p1x=t}get p1y(){return this.data.p1y+this.offset.y}set p1y(t){this.data.p1y=t}get p2x(){return this.data.p2x+this.offset.x}set p2x(t){this.data.p2x=t}get p2y(){return this.data.p2y+this.offset.y}set p2y(t){this.data.p2y=t}resetReference(t,e){this.path=t,this.parent=e||this.parent}initData(){this.length=0,this.data={p1x:0,p1y:0,p2x:0,p2y:0,ex:0,ey:0}}resetData(t){for(let e in t)this.data[e]!=null&&(this[e]=t[e]);this.refresh()}refresh(){this.length=this.getLength()}getLength(){return 0}getLastPosition(){return{x:this.ex,y:this.ey}}getType(){return this.toPathString().trim()[0]}render(t){}toPathString(){return""}getLinePosition(t){return{x:0,y:0}}};u(h,"MoveTo"),u(h,"LineTo"),u(h,"HorizontalLineTo"),u(h,"VerticalLineTo"),u(h,"Curve"),u(h,"QuadraticBezierCurve"),u(h,"SmoothCurve"),u(h,"SmoothQuadraticBezierCurve"),u(h,"Arc"),u(h,"ClosePath");var A=class extends h{constructor(t,e,r,n,i){super(t,e,i),this.resetData({ex:r,ey:n})}render(t){t.moveTo(this.ex,this.ey)}toPathString(){return`M${this.ex},${this.ey}`}getLinePosition(){return{x:this.ex,y:this.ey}}getPositionX(){return this.ex}getPositionY(){return this.ey}},v=class extends h{constructor(t,e,r,n,i){super(t,e,i),this.resetData({ex:r,ey:n})}render(t){t.lineTo(this.ex,this.ey)}toPathString(){return`L${this.ex},${this.ey}`}getLinePosition(t){return{x:this.sx*(1-t)+this.ex*t,y:this.sy*(1-t)+this.ey*t}}getLength(){return y.getDistance(this.sx,this.sy,this.ex,this.ey)}},D=class extends v{constructor(t,e,r,n){super(t,e,r,n?e.ey:0,n)}toPathString(){return`H${this.ex}`}},R=class extends v{constructor(t,e,r,n){super(t,e,n?e.ex:0,r,n)}toPathString(){return`V${this.ey}`}},f=class extends h{constructor(t,e,r,n,i,o,s,a,m=!1){super(t,e,m),this.resetData({p1x:r,p1y:n,p2x:i,p2y:o,ex:s,ey:a})}getStep(){return 100}getPoint(t,e,r,n,i){return e*(1-t)*(1-t)*(1-t)+3*r*(1-t)*(1-t)*t+3*n*(1-t)*t*t+i*t*t*t}getLength(){if(Y.GeometryElement)return y.getSvgLength(`M${this.sx},${this.sy}`+this.toPathString());var t=0,e=0,r=0,n=0,i=this.getStep(),o=0,s=0;for(let l=0;l<=i;l++){if(r=l/i,t=this.getPoint(r,this.sx,this.p1x,this.p2x,this.ex),e=this.getPoint(r,this.sy,this.p1y,this.p2y,this.ey),l>0){var a=t-o,m=e-s;n+=Math.sqrt(a*a+m*m)}o=t,s=e}return n}render(t){t.bezierCurveTo(this.p1x,this.p1y,this.p2x,this.p2y,this.ex,this.ey)}toPathString(){return`C${this.p1x},${this.p1y},${this.p2x},${this.p2y},${this.ex},${this.ey}`}getLinePosition(t){return{x:this.getPoint(t,this.sx,this.p1x,this.p2x,this.ex),y:this.getPoint(t,this.sy,this.p1y,this.p2y,this.ey)}}},z=class extends f{constructor(t,e,r,n,i,o,s=!1){super(t,e,r,n,r,n,i,o,s)}get p2x(){return this.p1x}set p2x(t){this.data.p2x=t}get p2y(){return this.p1y}set p2y(t){this.data.p2y=t}render(t){t.quadraticCurveTo(this.p1x,this.p1y,this.ex,this.ey)}toPathString(){return`Q${this.p1x},${this.p1y},${this.ex},${this.ey}`}getPoint(t,e,r,n,i){return(1-t)*(1-t)*e+2*t*(1-t)*r+t*t*i}},_=class extends f{constructor(t,e,r,n,i,o,s=!1){super(t,e,0,0,r,n,i,o,s)}get parentIsCurve(){return!!this.parent.getType().toLowerCase().match(/q|c|s|t/)}get p1x(){return this.parentIsCurve?this.parent.ex*2-this.parent.p2x:this.p2x}set p1x(t){this.data.p1x=t}get p1y(){return this.parentIsCurve?this.parent.ey*2-this.parent.p2y:this.p2y}set p1y(t){this.data.p1y=t}render(t){t.bezierCurveTo(this.p1x,this.p1y,this.p2x,this.p2y,this.ex,this.ey)}toPathString(){return`S${this.p2x},${this.p2y},${this.ex},${this.ey}`}},F=class extends f{constructor(t,e,r,n,i=!1){super(t,e,0,0,0,0,r,n,i),e.getType().toLowerCase()!=="q"&&(this.error="Smooth Quadratic BezierCurve previous point must a Quadratic Bezier Curve.")}get p2x(){return this.p1x}set p2x(t){}get p2y(){return this.p1y}set p2y(t){}get p1x(){return this.parent.ex*2-this.parent.p1x}set p1x(t){}get p1y(){return this.parent.ey*2-this.parent.p1y}set p1y(t){}render(t){t.quadraticCurveTo(this.p1x,this.p1y,this.ex,this.ey)}toPathString(){return`T${this.ex},${this.ey}`}getPoint(t,e,r,n,i){return(1-t)*(1-t)*e+2*t*(1-t)*r+t*t*i}},B=class extends h{constructor(e,r,n,i,o,s,a,m,l,p=!1){super(e,r,p);u(this,"rx");u(this,"ry");u(this,"sweepFlag");u(this,"largeArcFlag");u(this,"xAxisRotation");this.rx=n,this.ry=i,this.sweepFlag=a,this.largeArcFlag=s,this.xAxisRotation=o,this.resetData({ex:m,ey:l})}resetData(e){this.rx=e.rx?e.rx:this.rx,this.ry=e.ry?e.ry:this.ry,this.sweepFlag=e.sweepFlag?e.sweepFlag:this.sweepFlag,this.largeArcFlag=e.largeArcFlag?e.largeArcFlag:this.largeArcFlag,this.xAxisRotation=e.xAxisRotation?e.xAxisRotation:this.xAxisRotation,super.resetData(e)}getStep(){return 100}render(e){let r=this.getStep();for(let n=0;n<r;n+=1){let i=this.getLinePosition(n/r);e.lineTo(i.x,i.y)}}toPathString(){return`A${this.rx},${this.ry},${this.xAxisRotation},${this.largeArcFlag},${this.sweepFlag},${this.ex},${this.ey}`}angleBetween(e,r){var n=e.x*r.x+e.y*r.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(r.x,2)+Math.pow(r.y,2))),o=e.x*r.y-e.y*r.x<0?-1:1,s=o*Math.acos(n/i);return s}getLinePosition(e){var r=Math.abs(this.rx),n=Math.abs(this.ry),i=Math.pow(r,2),o=Math.pow(n,2),s=this.xAxisRotation%360*(Math.PI/180),a=Math.cos(s),m=Math.sin(s);if(this.sx===this.ex&&this.sy===this.ey)return{x:this.sx,y:this.sy};if(r===0||n===0)return{x:this.sx*(1-e)+this.ex*e,y:this.sy*(1-e)+this.ey*e};var l=(this.sx-this.ex)/2,p=(this.sy-this.ey)/2,g={x:a*l+m*p,y:-m*l+a*p},P=Math.pow(g.x,2),C=Math.pow(g.y,2),L=P/i+C/o;if(L>1){var x=Math.sqrt(L);r=x*r,n=x*n}var w=i*o-i*C-o*P,G=i*C+o*P,M=w/G;M=M<0?0:M;var E=(this.largeArcFlag!==this.sweepFlag?1:-1)*Math.sqrt(M),c={x:E*(r*g.y/n),y:E*(-(n*g.x)/r)},I={x:a*c.x-m*c.y+(this.sx+this.ex)/2,y:m*c.x+a*c.y+(this.sy+this.ey)/2},k={x:(g.x-c.x)/r,y:(g.y-c.y)/n},j=this.angleBetween({x:1,y:0},k),K={x:(-g.x-c.x)/r,y:(-g.y-c.y)/n},d=this.angleBetween(k,K),T=2*Math.PI;!this.sweepFlag&&d>0?d-=T:this.sweepFlag&&d<0&&(d+=T),d%=T;var N=j+d*e,V=r*Math.cos(N),O=n*Math.sin(N);return{x:a*V-m*O+I.x,y:m*V+a*O+I.y}}getDistance(e,r){return y.getDistance(e.x,e.y,r.x,r.y)}getLength(){if(Y.GeometryElement)return y.getSvgLength(`M${this.sx},${this.sy}`+this.toPathString());for(var e=this.getStep(),r=0,n=this.getLinePosition(0),i,o=0;o<e;o++){var s=Math.min(Math.max(o*(1/e),0),1);i=this.getLinePosition(s),r+=this.getDistance(n,i),n=i}return i=this.getLinePosition(1),r+=this.getDistance(n,i),r}},q=class extends v{constructor(t,e,r){super(t,e,r.ex,r.ey,r.absolute)}render(t){t.closePath()}toPathString(){return"z"}},Y={GeometryElement:(()=>{try{return y.getSvgLength("M0,0"),!0}catch{return!1}})()};h.MoveTo=A;h.LineTo=v;h.HorizontalLineTo=D;h.VerticalLineTo=R;h.Curve=f;h.QuadraticBezierCurve=z;h.SmoothCurve=_;h.SmoothQuadraticBezierCurve=F;h.Arc=B;h.ClosePath=q;var H=$;var Q=class b{constructor(t,e){u(this,"_core");this._core=new H(t,e)}setCache(t){this._core.setCache(t)}addPath(t){if(t instanceof b)return this._core.addPath(t._core),this;this.systemError("addPath","Object not a Ppath2D data.",t)}render(t){this._core.render(t)}toPathString(){return this._core.toPathString()}getRect(){return this._core.getRect()}getLastPosition(){return this._core.getLastPosition()}getLinePosition(t){return this._core.getLinePosition(t)}getDirection(t){return this._core.getDirection(t)}moveTo(t,e,r){return this._core.moveTo(t,e,r),this}lineTo(t,e,r){return this._core.lineTo(t,e,r),this}curve(t,e,r,n,i,o,s){return this._core.curve(t,e,r,n,i,o,s),this}quadraticBezierCurve(t,e,r,n,i){return this._core.quadraticBezierCurve(t,e,r,n,i),this}smoothCurve(t,e,r,n,i){return this._core.smoothCurve(t,e,r,n,i),this}smoothQuadraticBezierCurve(t,e,r){return this._core.smoothQuadraticBezierCurve(t,e,r),this}horizontalLineTo(t,e){return this._core.horizontalLineTo(t,e),this}verticalLineTo(t,e){return this._core.verticalLineTo(t,e),this}arc(t,e,r,n,i,o,s,a){return this._core.arc(t,e,r,n,i,o,s,a),this}closePath(){return this._core.closePath(),this}systemError(t,e,r="no_message"){throw r!=="no_message"&&(console.log("%c error object is : ","color:#FFF; background:red"),console.log(r)),new Error(`(\u2609\u0434\u2299)!! Main => ${t} -> ${e}`)}},se=Q;export{se as default};
//# sourceMappingURL=index.js.map
